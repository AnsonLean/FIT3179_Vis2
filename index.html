<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

    <!-- Import pure.css -->
    <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.3/build/pure-min.css"
     integrity="sha384-cg6SkqEOCV1NbJoCu11+bm0NvBRc8IYLRGXkmNrqUBfTjmMYwNKPWBTIKyw9mHNJ" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="style.css">

</head>


<body>
    <div class="page">

        <div class="pure-g">
            <div class="pure-u-1-1">
                <h1>Malaysia Household</h1>
            </div>
            <!-- Dropdown for map selection-->
            <div class="pure-u-1-1">
                <label for="map_selection">Choose your Data:</label>
                <select id="map_selection">
                    <option value="choropleth_mean_state_map.vg.json">Average Income</option>
                    <option value="choropleth_median_state_map.vg.json">Median Income</option>
                    <option value="choropleth_poverty_state_map.vg.json">Poverty Rate</option>
                    <option value="choropleth_expenditure_state_map.vg.json">Average Expenditure</option>
                    <option value="choropleth_gini_state_map.vg.json">Inequality</option>
                </select>
            </div>
            <div class="pure-u-1-1">
                <div id="map" class="vis-container"></div>
            </div>
            <div class="pure-u-1-1">
                <p>In general, <b>Kuala Lumpur, Selangor</b> and <b>Putrajaya</b> has the <b>highest average income, median income</b> and <b>average expenditure</b>. 
                    These three states also has the <b>lowest poverty rate</b>. But <i>Kuala Lumpur has the highest inequality</i> compared to the other two states.</p>
                <p>On the other hand, <b>Sabah</b> has the <b>highest poverty rate</b> even thought it <b>does not have the lowest average income</b>.
                   But Sabah does have the <b>highest inequality among all states</b>.</p>
            </div>
        </div>
        
        <div class="pure-g">
            <div class="pure-u-1-1">
                <h2>Household Trends in Malaysia</h2>
            </div>

            <div class="pure-u-1-1">
                <p>Have a look at the trend of income, poverty and unemployment rate.</p>
            </div>

            <div class="pure-u-1-1">
                <div id="trend_line" class="vis-container"></div>
            </div>

            <div class="pure-u-1-3">
                <p>Both average and median income has <b>steadily increase</b> across the years.</p>
                <p>But sadly, due to <b>COVID-19</b> pandemic, the income has drop heavily for the year <b>2020</b>.</p>
                <p>If there was <b>no pandemic</b>, the <b>average income</b> of malaysian household would have <b>break through RM9000</b>.</p>
            </div>

            <div class="pure-u-1-3">
                <p><span style="color: #ff0000;"><b>Absolute Poverty</b></span>: Household don't have sufficient income to meet basic needs for a dignified life.</p>
                <p><span style="color: #40E0D0;"><b>Hardcore Poverty</b></span>: Household don't have sufficient income to meet basic calorie requirement. </p>
                <p><span style="color: #800080;"><b>Relative Poverty</b></span>: When gross monthly household income is below half the national median income</p>
                <p>For more details: Refer to these <a href="https://open.dosm.gov.my/publications/technical-notes/hies-technotes" target="_blank"> technical notes</a>. </p>
            </div>

            <div class="pure-u-1-3">
                <p>For the year <b>1982 - 1985</b>, the unemployment rate has <b>spiked</b> due to <b>low level of labor utilisation</b>.</p>
                <p>The unemployment rate <b>stabilised</b> around <b>3% - 4%</b> for a few decades.</p>
                <p>But due to <b>COVID-19</b>, the unemployment rate <b>spiked</b> during year <b>2019 - 2020</b>.</p>
            </div>
        </div>

        <div class="pure-g">
            <div class="pure-u-1-1">
                <h2>Correlations</h2>
            </div>

            <div class="pure-u-1-1">
                <div id="scatter"></div>
            </div>
            <div class="pure-u-1-3">
                <p>On average, we can see that most states have average income around RM 5,500 and average expenditure around RM 3,900.</p>
                <p><span style="color: #E78AC3;">Putrajaya</span> has both the <b>highest average income and expenditure</b> across all states, likely due to more civil servant-centric and high living cost.</p>
                <p>Our capital city <span style="color: #F0E442;">Kuala Lumpur</span> has the <b>second highest average income</b> and <b>expenditure</b>.</p>
            </div>

            <div class="pure-u-1-3">
                <p><span style="color: #A6D854;">Sabah</span> has the <b>highest poverty rate</b> but <b>do not have the lowest income</b>, likely due to low income and high cost of living.</p>
                <p><span style="color: #E78AC3;">Putrajaya</span> has the <b>highest average income</b> and the <b>lowest poverty rate</b>, likely due to their high income and expendture remains same across the country.</p>
                <p>Our capital city <span style="color: #F0E442;">Kuala Lumpur</span> is placed <b>second </b> after <span style="color: #E78AC3;">Putrajaya</span>.</p>
            </div>

            <div class="pure-u-1-3">
                <p><b>Wealthier states</b> like <span style="color: #E78AC3;">Putrajaya</span> and <span style="color: #E5C494;">Selangor</span>, where <b>moderate inequality</b> is paired with <b>low poverty rates</b>.</p>
                <p><span style="color: #009E73;">Kelantan</span> and <span style="color: #A6D854;">Sabah</span> face both <b>high poverty and inequality</b>, likely due to <b>weaker economic infrastructure</b> and fewer safety nets.</p>
                <p>Our capital city <span style="color: #F0E442;">Kuala Lumpur</span> has the <b>second lowest poverty rate</b> but has a <b>high inequality</b>.</p>
            </div>

        </div>

        <div class="pure-g">
            <div class="pure-u-1-1">
                <h2>State Comparison</h2>
            </div>

            <div class="pure-u-1-3">
                <div id="donut_income"></div>
            </div>

            <div class="pure-u-1-3">
                <p>Did you notice that both average income and expenditure looks <b>similar</b> across all states?</p>
                <div class="container">
                    <img src="shocked.jpeg" alt="shocked" class="image" width="200">
                    <p class="text">Surprised?</p>
                </div>
                <p>This shows that regardless how high or low one's income is, the <b>expenditure</b> is still <b>always</b> around the <b>same percentage</b> (58% - 60%)</p>
                
            </div>

            <div class="pure-u-1-3">
                <div id="donut_exp"></div>
            </div>


        </div>

        <div class="pure-g">
            <div class="pure-u-1-1">
                <h2>Comparison with Neighbouring Countries</h2>
            </div>

            <div class="pure-u-1-2">
                <div id="bump_gdp"></div>
            </div>

            <div class="pure-u-1-2">
                <div id="bump_exp"></div>
            </div>

            <div class="pure-u-1-2">
                <p>We can see that the <b>ranking remains the same</b> for these <b>5 years</b>.</p>
                <p><b>No changes in ranking</b> for gross domestic product (GDP). But will it be the same with expenses?</p>
                <p>As <b>Malaysian</b>, we can stand proud that our <b>ranking</b> has <b>stayed at 2</b> over these 5 years.</p>
            </div>

            <div class="pure-u-1-2">
                <p>The expenses here are based on the percentage of the GDP.</p>
                <p>Unlike the consistent ranking of GDP, the <b>ranking fluctuates</b>  over these 5 years.</p>
                <p>We, <b>Malaysian</b>, has stayed at <b>rank 2 from 2016 - 2019</b>, but has drop to <b>rank 3 for 2020 - 2021</b>.</p>
            </div>

        </div>

        <div class="metadata">
            <p>Author: Anson Lean Huai Shen</p>
            <p>Dashboard updated: 12 October 2024</p>
            <p>Data Sources:</p>
            <ul>
                <li><a href="https://data.gov.my" target="_blank">data.gov.my</a> - Updated date: 2022</li>
                <li><a href="https://data.worldbank.org/indicator/" target="_blank">World Bank</a> - Updated date: 2023</li>
            </ul>
            <p>Image Source: <a href="https://google.com"> Google</a></p>
        </div>

    </div>


    <script type="text/javascript">
        
        //Function to load map
        function loadMap(mapFile){
            vegaEmbed("#map", mapFile,{actions: false}).then(function(result) {
            // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
            }).catch(console.error);
        }
        
        var initialMap = document.getElementById("map_selection").value;
        loadMap(initialMap);

        document.getElementById("map_selection").addEventListener("change", function(){
            var selectedMap = document.getElementById("map_selection").value;
            loadMap(selectedMap);
        });

        var vg_2 = "multiline_chart_employment_income_poverty.vg.json"; 
        vegaEmbed("#trend_line", vg_2,{actions: false}).then(function(result) {
        // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        }).catch(console.error);

        var vg_3 = "donut_avg_income.vg.json"; 
        vegaEmbed("#donut_income", vg_3,{actions: false}).then(function(result) {
        // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        }).catch(console.error);

        var vg_4 = "scatter_three.vg.json"; 
        vegaEmbed("#scatter", vg_4,{actions: false}).then(function(result) {
        // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        }).catch(console.error);

        var vg_5 = "bumpchart_gdp.vg.json"; 
        vegaEmbed("#bump_gdp", vg_5,{actions: false}).then(function(result) {
        // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        }).catch(console.error);

        var vg_6 = "bumpchart_expenses.vg.json"; 
        vegaEmbed("#bump_exp", vg_6,{actions: false}).then(function(result) {
        // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        }).catch(console.error);

        var vg_7 = "donut_avg_exp.vg.json"; 
        vegaEmbed("#donut_exp", vg_7,{actions: false}).then(function(result) {
        // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
        }).catch(console.error);
    </script>
</body>

</html>
