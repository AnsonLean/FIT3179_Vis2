{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "hconcat": [
      {
        "width": 285,
        "height": 300,
        "title": "Average Income vs Average Expenditure (2022)",
        "data": {
          "url": "https://raw.githubusercontent.com/AnsonLean/FIT3179_Vis2/refs/heads/main/dataset/hies_state.csv"
        },
        "layer": [
          {
            "selection": {
              "state_highlight": {
                "type": "multi",
                "fields": ["state"],
                "bind": "legend"
              }
            },
            "mark": {
              "type": "circle",
              "size": 50
            },
            "encoding": {
              "x": {
                "field": "income_mean",
                "type": "quantitative",
                "title": "Average Income"
              },
              "y": {
                "field": "expenditure_mean",
                "type": "quantitative",
                "title": "Average Expenditure"
              },
              "color": {
                "field": "state",
                "type": "nominal",
                "scale": {
                  "range": [
                    "#E69F00", "#56B4E9", "#009E73", "#F0E442",
                    "#0072B2", "#D55E00", "#CC79A7", "#999999",
                    "#66C2A5", "#FC8D62", "#8DA0CB", "#E78AC3",
                    "#A6D854", "#FFD92F", "#E5C494", "#B3B3B3"
                  ]
                },
                "legend": {"orient": "none", "direction": "horizontal", "legendY":350, "legendX":-20, "title":"State"}
              },
              "opacity": {
                "condition": {"selection": "state_highlight", "value": 1},
                "value": 0.2
              },
              "tooltip": [
                {"field": "state", "type": "nominal"},
                {"field": "income_mean", "type": "quantitative", "title":"Average Income (RM)", "format": ","},
                {"field": "expenditure_mean", "type": "quantitative", "title":"Average Expenditure (RM)", "format": ","}
              ]
            }
          },
          {
            "mark": {
              "type": "text",
              "align": "left",
              "baseline": "middle",
              "dx": -10,
              "dy": -10,
              "fontSize": 9
            },
            "encoding": {
              "x": {"field": "income_mean", "type": "quantitative"},
              "y": {"field": "expenditure_mean", "type": "quantitative"},
              "text": {"field": "state", "type": "nominal"},
              "color": {"value": "black"},
              "opacity": {
                "condition": {
                  "test": " datum['state']=='Kuala Lumpur' || datum['state']=='Sabah' || datum['state']=='Putrajaya'",
                  "value": 1
                },
                "value": 0
              }
            }
          },
          {
            "data":{"values": [{}]},
            "mark": {
              "type": "text",
              "text": "Do higher income mean",
              "dx":-70,
              "dy":-122,
              "fontStyle": "italic",
              "fontSize":12,
              "fontWeight":"bold"
            }
          },
          {
            "data":{"values": [{}]},
            "mark": {
              "type": "text",
              "text": "higher expenditure?",
              "dx":-70,
              "dy":-110,
              "fontStyle": "italic",
              "fontSize":12,
              "fontWeight":"bold"
            }
          }
        ]
      },
      {
        "width": 290,
        "height": 300,
        "title": "Average Income vs Poverty Rate (2022)",
        "data": {
          "url": "https://raw.githubusercontent.com/AnsonLean/FIT3179_Vis2/refs/heads/main/dataset/hies_state.csv"
        },
        "layer": [
          {
            "selection": {
              "state_highlight": {
                "type": "multi",
                "fields": ["state"],
                "bind": "legend"
              }
            },
            "mark": {
              "type": "circle",
              "size": 50
            },
            "encoding": {
              "x": {
                "field": "income_mean",
                "type": "quantitative",
                "title": "Average Income"
              },
              "y": {
                "field": "poverty",
                "type": "quantitative",
                "title": "Poverty Rate",
                "scale": {"domain": [0, 22]}
              },
              "color": {
                "field": "state",
                "type": "nominal",
                "scale": {
                  "range": [
                    "#E69F00", "#56B4E9", "#009E73", "#F0E442",
                    "#0072B2", "#D55E00", "#CC79A7", "#999999",
                    "#66C2A5", "#FC8D62", "#8DA0CB", "#E78AC3",
                    "#A6D854", "#FFD92F", "#E5C494", "#B3B3B3"
                  ]
                }
              },
              "opacity": {
                "condition": {"selection": "state_highlight", "value": 1},
                "value": 0.2
              },
              "tooltip": [
                {"field": "state", "type": "nominal"},
                {"field": "income_mean", "type": "quantitative","title":"Average Income (RM)", "format": ","},
                {"field": "poverty", "type": "quantitative","title":"Povery Rate"}
              ]
            }
          },
          {
            "mark": {
              "type": "text",
              "align": "left",
              "baseline": "middle",
              "dx": -10,
              "dy": -10,
              "fontSize": 9
            },
            "encoding": {
              "x": {"field": "income_mean", "type": "quantitative"},
              "y": {"field": "poverty", "type": "quantitative"},
              "text": {"field": "state", "type": "nominal"},
              "color": {"value": "black"},
              "opacity": {
                "condition": {
                  "test": "datum['state']=='Putrajaya' || datum['state']=='Kuala Lumpur' || datum['state']=='Sabah'",
                  "value": 1
                },
                "value": 0
              }
            }
          },
          {
            "data":{"values": [{}]},
            "mark": {
              "type": "text",
              "text": "Do lower income mean",
              "dx":80,
              "dy":-127,
              "fontStyle": "italic",
              "fontSize":12,
              "fontWeight":"bold"
            }
          },
          {
            "data":{"values": [{}]},
            "mark": {
              "type": "text",
              "text": "higher poverty rate?",
              "dx":80,
              "dy":-115,
              "fontStyle": "italic",
              "fontSize":12,
              "fontWeight":"bold"
            }
          }
        ]
      },
      {
        "width": 335,
        "height": 300,
        "title": "Gini Coefficient vs Poverty Rate for 2022",
        "data": {
          "url": "https://raw.githubusercontent.com/AnsonLean/FIT3179_Vis2/refs/heads/main/dataset/hies_state.csv"
        },
        "layer": [
          {
            "selection": {
              "state_highlight": {
                "type": "multi",
                "fields": ["state"],
                "bind": "legend"
              }
            },
            "mark": {
              "type": "circle",
              "size": 50
            },
            "encoding": {
              "x": {
                "field": "gini",
                "type": "quantitative",
                "title": "Gini Coefficient",
                "scale": {"domain": [0.28, 0.4]}
              },
              "y": {
                "field": "poverty",
                "type": "quantitative",
                "title": "Poverty Rate",
                "scale": {"domain": [0, 22]}
              },
              "color": {
                "field": "state",
                "type": "nominal",
                "scale": {
                  "range": [
                    "#E69F00", "#56B4E9", "#009E73", "#F0E442",
                    "#0072B2", "#D55E00", "#CC79A7", "#999999",
                    "#66C2A5", "#FC8D62", "#8DA0CB", "#E78AC3",
                    "#A6D854", "#FFD92F", "#E5C494", "#B3B3B3"
                  ]
                }
              },
              "opacity": {
                "condition": {"selection": "state_highlight", "value": 1},
                "value": 0.2
              },
              "tooltip": [
                {"field": "state", "type": "nominal"},
                {"field": "gini", "type": "quantitative", "title":"Inequality Coefficient", "format": ".4f"},
                {"field": "poverty", "type": "quantitative", "title":"Povery Rate"}
              ]
            }
          },
          {
            "mark": {
              "type": "text",
              "align": "left",
              "baseline": "middle",
              "dx": -10,
              "dy": -10,
              "fontSize": 9
            },
            "encoding": {
              "x": {"field": "gini", "type": "quantitative"},
              "y": {"field": "poverty", "type": "quantitative"},
              "text": {"field": "state", "type": "nominal"},
              "color": {"value": "black"},
              "opacity": {
                "condition": {
                  "test": "datum['state']=='Labuan' || datum['state']=='Sabah' || datum['state']=='Putrajaya' || datum['state']=='Kuala Lumpur'",
                  "value": 1
                },
                "value": 0
              }
            }
          },
          {
            "data":{"values": [{}]},
            "mark": {"type": "text", "fontStyle": "italic", "font": "Arial", "fontSize":12, "fontWeight":"bold"},
            "encoding": {"text": {"value": "Note: Gini Coefficient range between 0.28 - 0.40"}, "x":{ "value": 140}, "y": {"value": 15}}
          },
          {
            "data":{"values": [{}]},
            "mark": {
              "type": "text", 
              "text": "0 indicate perfect equality,",
              "dx": -53,
              "dy": -115,
              "fontStyle": "italic", 
              "fontSize":12, 
              "fontWeight":"bold"}
          },
          {
            "data":{"values": [{}]},
            "mark": {
              "type": "text", 
              "text": "1 indicate total inequality",
              "dx": -57,
              "dy": -100,
              "fontStyle": "italic", 
              "fontSize":12, 
              "fontWeight":"bold"}
          }
        ]
      }
    ]
  }
  